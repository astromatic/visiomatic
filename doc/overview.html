<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Technical overview &mdash; VisiOmatic 3.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=3ff5e572" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=acc74ff5"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Setup" href="setup.html" />
    <link rel="prev" title="Introduction" href="intro.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            VisiOmatic
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Technical overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#web-client">Web client</a></li>
<li class="toctree-l2"><a class="reference internal" href="#web-server">Web server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#data-management">Data management</a></li>
<li class="toctree-l3"><a class="reference internal" href="#security">Security</a></li>
<li class="toctree-l3"><a class="reference internal" href="#performance">Performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="#portability">Portability</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="interface.html">How to use VisiOmatic</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">VisiOmatic</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Technical overview</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/overview.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="technical-overview">
<h1>Technical overview<a class="headerlink" href="#technical-overview" title="Link to this heading"></a></h1>
<p>The <a class="reference external" href="http://visiomatic.org"><strong class="program">VisiOmatic</strong></a> package provides a complete remote visualization system for large multispectral/hyperspectral astronomical image data (or image sequences).
The web client interface runs in standard web browsers, generating image requests to a server on behalf of the user.
These <a class="reference external" href="http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a> requests are processed in real-time by the server, through a <a class="reference external" href="https://en.wikipedia.org/wiki/Web_API">web API</a>, to compute and deliver compressed images which are then updated almost immediately in the browser.
<strong class="program">VisiOmatic</strong> operates in a way very similar to other client-server applications such as <a class="reference external" href="https://jupyter.org/"><strong class="program">Jupyter</strong></a>, and may be used either locally (starting both the server and the client on your local machine), or remotely (accessing a dedicated server through the internet, generally by the means of <a class="reference external" href="https://en.wikipedia.org/wiki/Reverse_proxy">a reverse proxy</a>).</p>
<figure class="align-center" id="id4">
<span id="fig-visiomaticchart"></span><img alt="VisiOmatic chart" src="_images/visiomatic-chart.svg" /><figcaption>
<p><span class="caption-number">Fig. 1 </span><span class="caption-text">The <strong class="program">VisiOmatic</strong> web clients connect to the <strong class="program">VisiOmatic</strong> server component through an <a class="reference external" href="https://en.wikipedia.org/wiki/Asynchronous_Server_Gateway_Interface"><abbr title="Asynchronous Server Gateway Interface">ASGI</abbr></a> web server.
In remote usage scenarios such as the one depicted here, a reverse proxy is generally interposed between the ASGI web server and the web clients for additional flexibility and security.</span><a class="headerlink" href="#id4" title="Link to this image"></a></p>
</figcaption>
</figure>
<section id="web-client">
<h2>Web client<a class="headerlink" href="#web-client" title="Link to this heading"></a></h2>
<p>The <strong class="program">VisiOmatic</strong> web client <span id="id1">[<a class="reference internal" href="references.html#id3" title="E. Bertin, R. Pillay, and C. Marmo, 2015. Web-based visualization of very large scientific astronomy imagery. Astronomy and Computing, 10:43-53.">1</a>, <a class="reference internal" href="references.html#id4" title="Emmanuel Bertin, Chiara Marmo, and Hervé Bouy, 2019. VisiOmatic 2: a Web Client for Remote Visualization With Real-time Mixing of Multispectral Data. In Marco Molinaro, Keith Shortridge, and Fabio Pasian, editors, Astronomical Data Analysis Software and Systems XXVI, volume 521 of Astronomical Society of the Pacific Conference Series, 651. October 2019.">2</a>]</span> is built on top of the <a class="reference external" href="http://leafletjs.com"><strong class="program">Leaflet</strong></a> Javascript mini-framework (e.g., <a class="reference external" href="http://www.mapbox.com/">MapBox</a>, <a class="reference external" href="http://www.openstreetmap.org">OpenStreetMap</a>, ...).
The <strong class="program">VisiOmatic</strong> web client interface is fully asynchronous, and is particularly immune to connection glitches.
It is embeddable in regular Web pages, blog posts, portals, or wiki entries, and is entirely <a class="reference external" href="https://en.wikipedia.org/wiki/Web_template_system">templatable</a>.
It is compatible with touchscreen interfaces such as those offered by iOS and Android mobile devices.
The position and appearance of widgets is customizable through module options and <a class="reference external" href="http://en.wikipedia.org/wiki/Cascading_Style_Sheets">Cascading Style Sheets</a>.
The graphic engine relies purely on <a class="reference external" href="http://en.wikipedia.org/wiki/JavaScript">Javascript</a> and <a class="reference external" href="http://en.wikipedia.org/wiki/HTML5">HTML5</a> and not on proprietary technology.
It is fully compatible with the current breed of popular web browsers, including <a class="reference external" href="http://www.mozilla.org/en-US/firefox">Mozilla Firefox</a> (v94 and above), <a class="reference external" href="http://www.google.com/chrome">Google Chrome</a> (v95 and above), <a class="reference external" href="http://www.apple.com/safari">Apple Safari</a> (v15 and above), <a class="reference external" href="http://www.microsoft.com/en-us/windows/microsoft-edge">Microsoft Edge</a> (v95 an above) and <a class="reference external" href="http://www.opera.com">Opera</a> (v80 and above).</p>
</section>
<section id="web-server">
<h2>Web server<a class="headerlink" href="#web-server" title="Link to this heading"></a></h2>
<p>The <strong class="program">VisiOmatic</strong> server component version 3 (or above) is written in the Python language and communicates to clients through an <a class="reference external" href="https://en.wikipedia.org/wiki/Asynchronous_Server_Gateway_Interface"><abbr title="Asynchronous Server Gateway Interface">ASGI</abbr></a> web server.
It replaces the venerable <a class="reference external" href="https://github.com/cmarmo/iipsrv-astro"><strong class="program">IIPImage-astro</strong></a> <a class="reference external" href="http://www.fastcgi.com">FCGI (Fast Common Gateway Interface)</a> C++ code of earlier <strong class="program">VisiOmatic</strong> versions <span id="id2">[<a class="reference internal" href="references.html#id3" title="E. Bertin, R. Pillay, and C. Marmo, 2015. Web-based visualization of very large scientific astronomy imagery. Astronomy and Computing, 10:43-53.">1</a>, <a class="reference internal" href="references.html#id7" title="Denis Pitzalis, Ruven Pillay, and Christian Lahanier, 2006. A new concept in high resolution internet image browsing. In 10th International Conference on Electronic Publishing, 75-85. Bansko, Bulgaria, June 2006. Bulgarian Academy of Sciences, Bulgaria. 10th International Conference on Electronic Publishing, organised by the Bulgarian Academy of Sciences, Bulgaria, 14-16 June 2006.">3</a>]</span>.
It operates as a <a class="reference external" href="http://en.wikipedia.org/wiki/Web_service">web-service</a> that encodes and streams in real-time large high resolution images which are delivered in the form of compressed &quot;tiles&quot;.
It is designed to be fast and bandwidth-efficient.
Its <a class="reference external" href="https://en.wikipedia.org/wiki/Web_API">web API</a> is <a class="reference external" href="https://en.wikipedia.org/wiki/REST">RESTful</a> and follows the <a class="reference external" href="https://en.wikipedia.org/wiki/OpenAPI_Specification">OpenAPI specification</a>.</p>
<p>Compared to other existing solutions, <strong class="program">VisiOmatic</strong> has the advantage of providing on-the-fly compression to image formats natively supported in web browsers, as well as access to uncompressed pixel data.
This means that it can operate directly on science-grade multichannel data stored in floating-point format, and perform operations such as rescaling or channel-mixing before sending out the resulting image to the client.
Contrary to other solutions dealing with <a class="reference external" href="http://en.wikipedia.org/wiki/Multispectral_image">multispectral</a> data, all the image processing and compositing is done server-side.
This dramatically decreases the quantity of information that has to be sent to the browser, and the amount of computing which must be performed client-side, making the exploration of large datacubes from a smartphone a comfortable experience, even through a 4G connection.</p>
<section id="data-management">
<h3>Data management<a class="headerlink" href="#data-management" title="Link to this heading"></a></h3>
<p>Previous versions of <strong class="program">VisiOmatic</strong> would require the original image data files to be converted to a tiled multi-resolution <a class="reference external" href="https://iipimage.sourceforge.io/documentation/images/#TIFF">TIFF</a> format.
The new version works directly on <a class="reference external" href="https://en.wikipedia.org/wiki/FITS"><abbr title="Flexible Image Transport System">FITS</abbr></a> images, including data cubes and <a class="reference external" href="https://hst-docs.stsci.edu/hstdhb/3-hst-file-formats/3-2-fits-file-format"><abbr title="Multi-Extension FITS">MEF</abbr></a> files, and performs image tiling and rebinning on-the-fly.</p>
<p>Vector data are stored in <a class="reference external" href="http://geojson.org/">GeoJSON</a> format. GeoJSON offers a compact, yet human-friendly representation of features such as markers, lines, polygons, and can easily be generated from e.g., <a class="reference external" href="http://en.wikipedia.org/wiki/Comma-separated_values">CSV</a> or <a class="reference external" href="http://ds9.si.edu">ds9</a> region files.</p>
</section>
<section id="security">
<h3>Security<a class="headerlink" href="#security" title="Link to this heading"></a></h3>
<p>Data security is a major issue for online services. In <strong class="program">VisiOmatic</strong>, two mechanisms allow the webmaster to control the dissemination of data:</p>
<ul class="simple">
<li><p>Paths where the data files are located are not accessible from the web; they are only accessible by the server code, and absolute or relative access through upper levels of the directory tree is forbidden.</p></li>
<li><p>The <a class="reference external" href="http://en.wikipedia.org/wiki/Same-origin_policy">same origin security policy</a> in web browsers restricts data access to servers located in the same domain as the server hosting the client code, and prevents Javascript applications on websites from other domains sending <a class="reference external" href="http://en.wikipedia.org/wiki/Ajax_%28programming%29">AJAX</a> requests directly to the <strong class="program">VisiOmatic</strong> server.</p></li>
</ul>
<p>If however data sharing with other domains is a desired feature, <strong class="program">VisiOmatic</strong> implements the <a class="reference external" href="http://en.wikipedia.org/wiki/Cross-origin_resource_sharing">CORS</a> mechanism to allow such requests from selected or all external websites.</p>
</section>
<section id="performance">
<h3>Performance<a class="headerlink" href="#performance" title="Link to this heading"></a></h3>
<p>Although Python is not the fastest language for manipulating data, <strong class="program">VisiOmatic</strong> is fairly efficient. Current server code is able to serve thousands of 256×256 JPEG tiles per second per CPU core.
The output image stream from a single 16-core server under heavy load (tens of thousands of tile requests per second) can thus easily saturate a 1 Gbit/s connection <em>even without caching</em>.</p>
</section>
<section id="portability">
<h3>Portability<a class="headerlink" href="#portability" title="Link to this heading"></a></h3>
<p>The server has been tested on the Linux, MacOS and Windows platforms. Note that presently only the Linux version can take advantage of multiple CPU cores, due to limitations with Python wrappers to low-level system libraries.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="intro.html" class="btn btn-neutral float-left" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="setup.html" class="btn btn-neutral float-right" title="Setup" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024 Emmanuel Bertin, Hervé Bouy.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>